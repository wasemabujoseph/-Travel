<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Diraasti ‚Äì Tawjihi Generation 2008</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    body {
      font-family: 'Cairo', 'Inter', sans-serif;
    }
    .planner-table {
      table-layout: fixed;
      width: 100%;
    }
    .planner-table th, .planner-table td {
      padding: 8px;
      border: 1px solid #ddd;
      text-align: center;
    }
    .dark-mode .planner-table th,
    .dark-mode .planner-table td {
      border-color: #444;
    }
    .task {
      @apply text-xs p-1 rounded truncate;
    }
    .voice-wave {
      display: inline-block;
      width: 4px;
      height: 16px;
      background: #6366f1;
      margin: 0 1px;
      border-radius: 2px;
      animation: wave 1s ease-in-out infinite;
    }
    .voice-wave:nth-child(2) { height: 8px; animation-delay: 0.2s; }
    .voice-wave:nth-child(3) { height: 12px; animation-delay: 0.4s; }
    .voice-wave:nth-child(4) { height: 6px; animation-delay: 0.6s; }
    .voice-wave:nth-child(5) { height: 10px; animation-delay: 0.8s; }

    @keyframes wave {
      0%, 100% { transform: scaleY(0.6); }
      50% { transform: scaleY(1.2); }
    }

    .flashcard {
      perspective: 1000px;
    }
    .flashcard-inner {
      position: relative;
      width: 100%;
      height: 200px;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }
    .flashcard.flipped .flashcard-inner {
      transform: rotateY(180deg);
    }
    .flashcard-front,
    .flashcard-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      border-radius: 12px;
    }
    .flashcard-front {
      background-color: #3b82f6;
      color: white;
    }
    .flashcard-back {
      background-color: #10b981;
      color: white;
      transform: rotateY(180deg);
    }

    [x-cloak] { display: none !important; }

    .dark-mode {
      background-color: #121212;
      color: #e0e0e0;
    }
    .dark-mode .card {
      background-color: #1f2937;
    }
    .dark-mode input,
    .dark-mode textarea,
    .dark-mode select {
      background-color: #374151;
      border-color: #4b5563;
      color: #f3f4f6;
    }
    .dark-mode .btn-primary {
      background-color: #6366f1;
    }
    .dark-mode .planner-table th {
      background-color: #374151;
      color: #f3f4f6;
    }
    .dark-mode .planner-table td {
      background-color: #1f2937;
    }
    .dark-mode .chat-bubble {
      background-color: #374151;
    }
    .dark-mode .sidebar {
      background-color: #1f2937;
    }
    .dark-mode .dropdown-content {
      background-color: #374151;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900 transition-all duration-300">
  <div id="app"></div>

  <script type="text/babel">
    const {
      useState,
      useEffect,
      useRef
    } = React;

    const DiraastiApp = () => {
      const [darkMode, setDarkMode] = useState(false);
      const [language, setLanguage] = useState('en');
      const [user, setUser] = useState(null);
      const [activeTab, setActiveTab] = useState('dashboard');
      const [subject, setSubject] = useState('chemistry');
      const [plannerView, setPlannerView] = useState('week');
      const [showQuiz, setShowQuiz] = useState(false);
      const [quiz, setQuiz] = useState(null);
      const [currentQuizIndex, setCurrentQuizIndex] = useState(0);
      const [quizAnswers, setQuizAnswers] = useState([]);
      const [quizSubmitted, setQuizSubmitted] = useState(false);
      const [aiChat, setAiChat] = useState([]);
      const [chatInput, setChatInput] = useState('');
      const [isListening, setIsListening] = useState(false);
      const [showFlashcard, setShowFlashcard] = useState(false);
      const [flashcards, setFlashcards] = useState([
        { front: "Avogadro's Number", back: "6.022 √ó 10¬≤¬≥ particles per mole" },
        { front: "Photosynthesis Equation", back: "6CO‚ÇÇ + 6H‚ÇÇO ‚Üí C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ + 6O‚ÇÇ" },
        { front: "Passive Voice Structure", back: "Subject + be + past participle" }
      ]);
      const [currentFlashcardIndex, setCurrentFlashcardIndex] = useState(0);
      const [notifications, setNotifications] = useState([
        { id: 1, message: "Don't forget to review Chemistry Chapter 3", time: "10 min ago", read: false },
        { id: 2, message: "New past paper added for Biology", time: "1 hour ago", read: true }
      ]);
      const [points, setPoints] = useState(1250);
      const [badges, setBadges] = useState(['First Quiz', 'Streak 3 Days']);
      const [examDates] = useState({
        chemistry: new Date('2025-06-10'),
        biology: new Date('2025-06-15'),
        english: new Date('2025-06-20'),
        elective: new Date('2025-06-25')
      });

      const fileInputRef = useRef(null);
      const chatEndRef = useRef(null);

      // Mock data
      const subjects = {
        chemistry: { name: 'Chemistry', arabic: 'ŸÉŸäŸÖŸäÿßÿ°', color: 'bg-blue-500', progress: 65, topics: 12, completed: 8, practice: 5 },
        biology: { name: 'Biology', arabic: 'ÿ£ÿ≠Ÿäÿßÿ°', color: 'bg-green-500', progress: 45, topics: 15, completed: 6, practice: 3 },
        english: { name: 'Advanced English', arabic: 'ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä ŸÖÿ™ŸÇÿØŸÖ', color: 'bg-purple-500', progress: 78, topics: 10, completed: 8, practice: 7 },
        elective: { name: 'Elective', arabic: 'ÿßÿÆÿ™Ÿäÿßÿ±Ÿä', color: 'bg-orange-500', progress: 30, topics: 8, completed: 2, practice: 1 }
      };

      const topicLists = {
        chemistry: [
          { id: 1, name: 'Atomic Structure', completed: true },
          { id: 2, name: 'Chemical Bonding', completed: true },
          { id: 3, name: 'Stoichiometry', completed: false },
          { id: 4, name: 'Thermodynamics', completed: false },
          { id: 5, name: 'Kinetics', completed: true },
          { id: 6, name: 'Equilibrium', completed: false },
          { id: 7, name: 'Acids and Bases', completed: true },
          { id: 8, name: 'Electrochemistry', completed: false },
          { id: 9, name: 'Organic Chemistry', completed: false },
          { id: 10, name: 'Biochemistry', completed: false },
          { id: 11, name: 'Nuclear Chemistry', completed: false },
          { id: 12, name: 'Environmental Chemistry', completed: false }
        ],
        biology: [
          { id: 1, name: 'Cell Structure', completed: true },
          { id: 2, name: 'Metabolism', completed: true },
          { id: 3, name: 'Genetics', completed: false },
          { id: 4, name: 'Evolution', completed: false },
          { id: 5, name: 'Ecology', completed: false },
          { id: 6, name: 'Human Physiology', completed: true },
          { id: 7, name: 'Plant Biology', completed: false },
          { id: 8, name: 'Biotechnology', completed: false },
          { id: 9, name: 'Microbiology', completed: false },
          { id: 10, name: 'Immunology', completed: false },
          { id: 11, name: 'Developmental Biology', completed: false },
          { id: 12, name: 'Neurobiology', completed: false },
          { id: 13, name: 'Endocrinology', completed: false },
          { id: 14, name: 'Reproduction', completed: false },
          { id: 15, name: 'Homeostasis', completed: false }
        ],
        english: [
          { id: 1, name: 'Grammar Review', completed: true },
          { id: 2, name: 'Essay Writing', completed: true },
          { id: 3, name: 'Literary Analysis', completed: true },
          { id: 4, name: 'Vocabulary Building', completed: true },
          { id: 5, name: 'Reading Comprehension', completed: true },
          { id: 6, name: 'Research Skills', completed: true },
          { id: 7, name: 'Presentation Skills', completed: true },
          { id: 8, name: 'Advanced Syntax', completed: false },
          { id: 9, name: 'Rhetorical Devices', completed: false },
          { id: 10, name: 'Critical Thinking', completed: false }
        ],
        elective: [
          { id: 1, name: 'Topic 1', completed: false },
          { id: 2, name: 'Topic 2', completed: true },
          { id: 3, name: 'Topic 3', completed: false },
          { id: 4, name: 'Topic 4', completed: false },
          { id: 5, name: 'Topic 5', completed: false },
          { id: 6, name: 'Topic 6', completed: false },
          { id: 7, name: 'Topic 7', completed: false },
          { id: 8, name: 'Topic 8', completed: false }
        ]
      };

      const motivationalQuotes = [
        "ÿßŸÑŸÜÿ¨ÿßÿ≠ ŸáŸà ÿßŸÑÿ±ÿ≠ŸÑÿ©ÿå ŸàŸÑŸäÿ≥ ÿßŸÑŸàÿ¨Ÿáÿ©. - ÿ≥ÿπŸäÿØ ÿ®ŸÜ ÿ¨ÿ®Ÿäÿ±",
        "ÿßŸÑŸÖÿπÿ±ŸÅÿ© ŸÇŸàÿ©. - ŸÅÿ±ÿßŸÜÿ≥Ÿäÿ≥ ÿ®ŸäŸÉŸàŸÜ",
        "ÿßŸÑÿßÿ≥ÿ™ÿπÿØÿßÿØ ŸáŸà ÿßŸÑŸÖŸÅÿ™ÿßÿ≠ ŸÑŸÑŸÜÿ¨ÿßÿ≠.",
        "ŸÉŸÑ ŸäŸàŸÖ ŸäŸÖÿ± ŸáŸà ÿÆÿ∑Ÿàÿ© ŸÜÿ≠Ÿà ÿßŸÑŸáÿØŸÅ."
      ];

      const [currentQuote] = useState(motivationalQuotes[0]);

      const daysUntil = (date) => {
        const today = new Date();
        const diffTime = date - today;
        return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      };

      const handleLogin = (e) => {
        e.preventDefault();
        setUser({ name: 'Ahmed Ali', email: 'ahmed@example.com', role: 'student' });
        setActiveTab('dashboard');
      };

      const toggleTopic = (subjectKey, topicId) => {
        // In a real app, this would update state and save to backend
        alert(`Topic toggled in ${subjectKey}, topic ${topicId}`);
      };

      const startQuiz = () => {
        const questions = [
          {
            question: "What is the chemical formula for water?",
            options: ["H2O", "CO2", "O2", "NaCl"],
            correct: 0,
            explanation: "Water consists of two hydrogen atoms and one oxygen atom."
          },
          {
            question: "Which organelle is known as the powerhouse of the cell?",
            options: ["Nucleus", "Mitochondria", "Ribosome", "Lysosome"],
            correct: 1,
            explanation: "Mitochondria produce ATP through cellular respiration."
          },
          {
            question: "Choose the correct passive voice: 'The book ___ by Sarah.'",
            options: ["was written", "wrote", "is writing", "has wrote"],
            correct: 0,
            explanation: "Passive voice uses 'be' + past participle."
          }
        ];
        setQuiz(questions);
        setCurrentQuizIndex(0);
        setQuizAnswers(new Array(questions.length).fill(null));
        setQuizSubmitted(false);
        setShowQuiz(true);
      };

      const submitQuiz = () => {
        setQuizSubmitted(true);
      };

      const handleAnswer = (index, answer) => {
        const newAnswers = [...quizAnswers];
        newAnswers[index] = answer;
        setQuizAnswers(newAnswers);
      };

      const nextQuestion = () => {
        if (currentQuizIndex < quiz.length - 1) {
          setCurrentQuizIndex(currentQuizIndex + 1);
        }
      };

      const prevQuestion = () => {
        if (currentQuizIndex > 0) {
          setCurrentQuizIndex(currentQuizIndex - 1);
        }
      };

      const sendChat = () => {
        if (!chatInput.trim()) return;
        const userMsg = { sender: 'user', text: chatInput };
        const aiMsg = { sender: 'ai', text: `I understand you're asking about "${chatInput}". Based on your weak points in ${subjects[subject].name}, I recommend reviewing chapter 3 and completing the practice quiz.` };
        setAiChat([...aiChat, userMsg, aiMsg]);
        setChatInput('');
      };

      const toggleVoice = () => {
        setIsListening(!isListening);
        if (!isListening) {
          setTimeout(() => {
            setChatInput("What is photosynthesis?");
            setIsListening(false);
          }, 2000);
        }
      };

      const exportPlanner = () => {
        const element = document.getElementById('planner');
        html2pdf().from(element).save('diraasti-planner.pdf');
      };

      const toggleFlashcard = () => {
        setShowFlashcard(!showFlashcard);
      };

      const nextFlashcard = () => {
        setCurrentFlashcardIndex((prev) => (prev + 1) % flashcards.length);
      };

      const prevFlashcard = () => {
        setCurrentFlashcardIndex((prev) => (prev - 1 + flashcards.length) % flashcards.length);
      };

      useEffect(() => {
        if (chatEndRef.current) {
          chatEndRef.current.scrollIntoView({ behavior: 'smooth' });
        }
      }, [aiChat]);

      const formatTime = () => {
        const now = new Date();
        return now.toLocaleTimeString(language === 'en' ? 'en-US' : 'ar-SA');
      };

      const [currentTime, setCurrentTime] = useState(formatTime());

      useEffect(() => {
        const timer = setInterval(() => {
          setCurrentTime(formatTime());
        }, 1000);
        return () => clearInterval(timer);
      }, [language]);

      return (
        <div className={`min-h-screen transition-colors duration-300 ${darkMode ? 'dark-mode' : 'bg-gray-50'}`}>
          {/* Header */}
          <header className="bg-white dark:bg-gray-800 shadow-md">
            <div className="container mx-auto px-4 py-4 flex flex-wrap items-center justify-between">
              <div className="flex items-center space-x-2 rtl:space-x-reverse">
                <div className="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                  <span className="text-white font-bold text-lg">D</span>
                </div>
                <div>
                  <h1 className="text-xl font-bold text-gray-800 dark:text-white">Diraasti</h1>
                  <p className="text-xs text-gray-500 dark:text-gray-400">Tawjihi 2008</p>
                </div>
              </div>

              <div className="flex items-center space-x-4 mt-2 sm:mt-0 rtl:space-x-reverse">
                <button
                  onClick={() => setLanguage(language === 'en' ? 'ar' : 'en')}
                  className="px-3 py-1 bg-gray-200 dark:bg-gray-700 rounded-full text-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition"
                >
                  {language === 'en' ? 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©' : 'English'}
                </button>
                <button
                  onClick={() => setDarkMode(!darkMode)}
                  className="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition"
                >
                  {darkMode ? (
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                  ) : (
                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                  )}
                </button>

                {user ? (
                  <div className="relative">
                    <button className="flex items-center space-x-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-3 py-1.5 rounded-lg text-sm font-medium">
                      <span>{user.name}</span>
                      <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7" />
                      </svg>
                    </button>
                  </div>
                ) : (
                  <button
                    onClick={() => setActiveTab('login')}
                    className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition"
                  >
                    {language === 'en' ? 'Login' : 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ'}
                  </button>
                )}
              </div>
            </div>
          </header>

          {!user ? (
            /* Login Screen */
            <div className="flex items-center justify-center min-h-screen bg-gray-100 dark:bg-gray-900">
              <div className="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg w-full max-w-md">
                <div className="text-center mb-8">
                  <div className="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span className="text-white text-2xl font-bold">D</span>
                  </div>
                  <h2 className="text-2xl font-bold text-gray-800 dark:text-white">Welcome to Diraasti</h2>
                  <p className="text-gray-600 dark:text-gray-300 mt-2">Tawjihi Generation 2008</p>
                </div>
                <form onSubmit={handleLogin}>
                  <div className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
                      <input
                        type="email"
                        required
                        className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
                        placeholder="ahmed@example.com"
                      />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Password</label>
                      <input
                        type="password"
                        required
                        className="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                      />
                    </div>
                    <button
                      type="submit"
                      className="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition duration-200"
                    >
                      {language === 'en' ? 'Sign In' : 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ'}
                    </button>
                  </div>
                </form>
                <div className="mt-6 text-center">
                  <p className="text-sm text-gray-600 dark:text-gray-400">
                    Demo credentials: any email/password
                  </p>
                </div>
              </div>
            </div>
          ) : (
            <div className="flex flex-col lg:flex-row">
              {/* Sidebar */}
              <aside className="w-full lg:w-64 bg-white dark:bg-gray-800 shadow-sm min-h-screen">
                <nav className="p-4">
                  <div className="space-y-2">
                    {[
                      { id: 'dashboard', label: 'Dashboard', icon: 'üìä' },
                      { id: 'planner', label: 'Study Planner', icon: 'üìÖ' },
                      { id: 'resources', label: 'Resource Hub', icon: 'üìö' },
                      { id: 'quizzes', label: 'Quizzes', icon: 'üìù' },
                      { id: 'ai', label: 'Study with AI', icon: 'ü§ñ' },
                      { id: 'revision', label: 'Revision Mode', icon: 'üîÅ' },
                      { id: 'admin', label: 'Admin Panel', icon: 'üë®‚Äçüè´', role: 'admin' }
                    ].map(item => (
                      <button
                        key={item.id}
                        onClick={() => setActiveTab(item.id)}
                        className={`w-full text-right px-4 py-3 rounded-lg flex items-center space-x-3 transition ${
                          activeTab === item.id
                            ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300'
                            : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
                        }`}
                      >
                        <span>{item.icon}</span>
                        <span className="font-medium">{language === 'en' ? item.label : item.label}</span>
                      </button>
                    ))}
                  </div>
                </nav>
              </aside>

              {/* Main Content */}
              <main className="flex-1 p-6 bg-gray-50 dark:bg-gray-900 min-h-screen">
                {/* Dashboard */}
                {activeTab === 'dashboard' && (
                  <div className="space-y-6">
                    <div className="flex flex-wrap items-center justify-between">
                      <h2 className="text-2xl font-bold text-gray-800 dark:text-white">Dashboard</h2>
                      <div className="text-sm text-gray-600 dark:text-gray-400">
                        {currentTime} | {currentQuote}
                      </div>
                    </div>

                    {/* Exam Countdown */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                      {Object.entries(examDates).map(([key, date]) => {
                        const days = daysUntil(date);
                        const subject = subjects[key];
                        return (
                          <div key={key} className="bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm">
                            <div className="flex items-center justify-between mb-2">
                              <span className={`px-2 py-1 rounded-full text-xs font-medium ${subject.color} text-white`}>
                                {subject.name}
                              </span>
                              <span className="text-sm text-gray-500 dark:text-gray-400">
                                {days} {language === 'en' ? 'days left' : 'ŸäŸàŸÖ'}
                              </span>
                            </div>
                            <div className="text-2xl font-bold text-gray-800 dark:text-white">
                              {days}
                            </div>
                            <div className="text-sm text-gray-600 dark:text-gray-400 mt-1">
                              {language === 'en' ? 'Days until exam' : 'ŸäŸàŸÖÿßŸã ÿ≠ÿ™Ÿâ ÿßŸÑÿßŸÖÿ™ÿ≠ÿßŸÜ'}
                            </div>
                          </div>
                        );
                      })}
                    </div>

                    {/* Subject Progress */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      {Object.entries(subjects).map(([key, subj]) => (
                        <div key={key} className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <div className="flex items-center justify-between mb-4">
                            <h3 className="text-lg font-bold text-gray-800 dark:text-white">{subj.name}</h3>
                            <span className={`px-3 py-1 rounded-full text-sm font-medium ${subj.color} text-white`}>
                              {subj.arabic}
                            </span>
                          </div>
                          <div className="space-y-4">
                            <div>
                              <div className="flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-1">
                                <span>Progress</span>
                                <span>{subj.progress}%</span>
                              </div>
                              <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                <div
                                  className={`h-2 rounded-full ${subj.color}`}
                                  style={{ width: `${subj.progress}%` }}
                                ></div>
                              </div>
                            </div>
                            <div className="grid grid-cols-3 gap-4 text-center">
                              <div>
                                <div className="text-2xl font-bold text-gray-800 dark:text-white">{subj.completed}/{subj.topics}</div>
                                <div className="text-xs text-gray-500 dark:text-gray-400">Topics</div>
                              </div>
                              <div>
                                <div className="text-2xl font-bold text-gray-800 dark:text-white">{subj.practice}</div>
                                <div className="text-xs text-gray-500 dark:text-gray-400">Papers</div>
                              </div>
                              <div>
                                <div className="text-2xl font-bold text-gray-800 dark:text-white">{Math.round(subj.progress * 10)}</div>
                                <div className="text-xs text-gray-500 dark:text-gray-400">Points</div>
                              </div>
                            </div>
                            <div className="flex space-x-2 rtl:space-x-reverse">
                              <button
                                onClick={() => {
                                  setSubject(key);
                                  setActiveTab('subject-' + key);
                                }}
                                className="flex-1 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition"
                              >
                                View Details
                              </button>
                              <button
                                onClick={startQuiz}
                                className="flex-1 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition"
                              >
                                Quiz
                              </button>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>

                    {/* Gamification */}
                    <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                      <h3 className="text-lg font-bold text-gray-800 dark:text-white mb-4">Your Progress</h3>
                      <div className="flex flex-wrap items-center gap-6">
                        <div className="text-center">
                          <div className="text-2xl font-bold text-blue-600">{points}</div>
                          <div className="text-sm text-gray-600 dark:text-gray-400">Points</div>
                        </div>
                        <div className="text-center">
                          <div className="text-2xl font-bold text-yellow-500">üî• 7</div>
                          <div className="text-sm text-gray-600 dark:text-gray-400">Streak</div>
                        </div>
                        <div className="flex flex-wrap gap-2">
                          {badges.map((badge, i) => (
                            <span
                              key={i}
                              className="px-3 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 rounded-full text-xs font-medium"
                            >
                              üèÜ {badge}
                            </span>
                          ))}
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Planner */}
                {activeTab === 'planner' && (
                  <div className="space-y-6">
                    <div className="flex flex-wrap items-center justify-between">
                      <h2 className="text-2xl font-bold text-gray-800 dark:text-white">Study Planner</h2>
                      <div className="flex space-x-2 rtl:space-x-reverse">
                        {['day', 'week', 'month', 'year'].map(view => (
                          <button
                            key={view}
                            onClick={() => setPlannerView(view)}
                            className={`px-3 py-1 rounded-lg text-sm font-medium transition ${
                              plannerView === view
                                ? 'bg-blue-600 text-white'
                                : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
                            }`}
                          >
                            {view.charAt(0).toUpperCase() + view.slice(1)}
                          </button>
                        ))}
                        <button
                          onClick={exportPlanner}
                          className="px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition"
                        >
                          Export PDF
                        </button>
                      </div>
                    </div>

                    <div id="planner" className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                      <h3 className="text-lg font-bold text-gray-800 dark:text-white mb-4 capitalize">{plannerView} View</h3>
                      {plannerView === 'week' && (
                        <div className="overflow-x-auto">
                          <table className="planner-table">
                            <thead>
                              <tr>
                                <th className="w-20 bg-gray-100 dark:bg-gray-700">Time</th>
                                <th className="bg-gray-100 dark:bg-gray-700">Saturday</th>
                                <th className="bg-gray-100 dark:bg-gray-700">Sunday</th>
                                <th className="bg-gray-100 dark:bg-gray-700">Monday</th>
                                <th className="bg-gray-100 dark:bg-gray-700">Tuesday</th>
                                <th className="bg-gray-100 dark:bg-gray-700">Wednesday</th>
                                <th className="bg-gray-100 dark:bg-gray-700">Thursday</th>
                                <th className="bg-gray-100 dark:bg-gray-700">Friday</th>
                              </tr>
                            </thead>
                            <tbody>
                              {Array.from({ length: 24 }, (_, i) => (
                                <tr key={i}>
                                  <td className="font-mono text-sm bg-gray-50 dark:bg-gray-900">{i.toString().padStart(2, '0')}:00</td>
                                  {Array.from({ length: 7 }, (_, j) => (
                                    <td key={j} className="min-h-10">
                                      {i === 17 && j === 0 && (
                                        <div className="task bg-blue-500 text-white">Chemistry 17:00-18:00</div>
                                      )}
                                      {i === 18 && j === 0 && (
                                        <div className="task bg-green-500 text-white">Biology 18:00-19:00</div>
                                      )}
                                      {i === 19 && j === 1 && (
                                        <div className="task bg-purple-500 text-white">English 19:00-20:00</div>
                                      )}
                                    </td>
                                  ))}
                                </tr>
                              ))}
                            </tbody>
                          </table>
                        </div>
                      )}
                      {plannerView === 'day' && (
                        <div className="overflow-y-auto max-h-96">
                          <table className="planner-table">
                            <thead>
                              <tr>
                                <th className="w-20 bg-gray-100 dark:bg-gray-700">Time</th>
                                <th className="bg-gray-100 dark:bg-gray-700">Today</th>
                              </tr>
                            </thead>
                            <tbody>
                              {Array.from({ length: 24 }, (_, i) => (
                                <tr key={i}>
                                  <td className="font-mono text-sm bg-gray-50 dark:bg-gray-900">{i.toString().padStart(2, '0')}:00</td>
                                  <td className="min-h-10">
                                    {i === 17 && <div className="task bg-blue-500 text-white">Chemistry Revision</div>}
                                    {i === 19 && <div className="task bg-purple-500 text-white">Essay Writing</div>}
                                  </td>
                                </tr>
                              ))}
                            </tbody>
                          </table>
                        </div>
                      )}
                      <p className="text-sm text-gray-500 dark:text-gray-400 mt-4">
                        {language === 'en' ? 'Drag and drop to schedule tasks. Auto-saved.' : 'ÿßÿ≥ÿ≠ÿ® Ÿàÿ£ŸÅŸÑÿ™ ŸÑÿ¨ÿØŸàŸÑÿ© ÿßŸÑŸÖŸáÿßŸÖ. Ÿäÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏ ÿßŸÑÿ™ŸÑŸÇÿßÿ¶Ÿä.'}
                      </p>
                    </div>
                  </div>
                )}

                {/* Resource Hub */}
                {activeTab === 'resources' && (
                  <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800 dark:text-white">Resource Hub</h2>
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                      <div className="lg:col-span-2 space-y-6">
                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <div className="flex justify-between items-center mb-4">
                            <h3 className="text-lg font-bold">Upload Resources</h3>
                            <button
                              onClick={() => fileInputRef.current?.click()}
                              className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition"
                            >
                              Upload File
                            </button>
                            <input
                              ref={fileInputRef}
                              type="file"
                              className="hidden"
                              onChange={(e) => {
                                const file = e.target.files[0];
                                if (file) alert(`File uploaded: ${file.name}`);
                              }}
                            />
                          </div>
                          <div className="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center">
                            <svg className="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                            <p className="text-gray-600 dark:text-gray-400">Drag & drop files here, or click to browse</p>
                            <p className="text-sm text-gray-500 dark:text-gray-500 mt-1">PDF, DOC, JPG, PNG supported</p>
                          </div>
                        </div>

                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-4">Your Files</h3>
                          <div className="space-y-2">
                            {['chemistry-summary.pdf', 'biology-past-paper-2023.pdf', 'english-essay-guide.docx'].map((file, i) => (
                              <div key={i} className="flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg">
                                <div className="flex items-center space-x-3">
                                  <div className="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center">
                                    <span className="text-blue-600 dark:text-blue-300 text-sm font-bold">PDF</span>
                                  </div>
                                  <span className="font-medium">{file}</span>
                                </div>
                                <div className="flex space-x-2 rtl:space-x-reverse">
                                  <button className="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm">View</button>
                                  <button className="text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 text-sm">Delete</button>
                                </div>
                              </div>
                            ))}
                          </div>
                        </div>
                      </div>

                      <div className="space-y-6">
                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-4">AI Assistant</h3>
                          <div className="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg min-h-32 mb-4">
                            <p className="text-gray-700 dark:text-gray-300 text-sm">
                              Select text in a PDF to get AI explanations using Google Gemini.
                            </p>
                          </div>
                          <button className="w-full py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition">
                            Ask AI About File
                          </button>
                        </div>

                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-4">Search Resources</h3>
                          <div className="space-y-3">
                            <select className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
                              <option>Chemistry</option>
                              <option>Biology</option>
                              <option>Advanced English</option>
                              <option>Elective</option>
                            </select>
                            <input
                              type="text"
                              placeholder="Search for topics..."
                              className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                            />
                            <button className="w-full py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition">
                              Search
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Quizzes */}
                {activeTab === 'quizzes' && (
                  <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800 dark:text-white">AI-Generated Quizzes</h2>
                    <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
                      <div className="lg:col-span-1 space-y-4">
                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-4">Generate Quiz</h3>
                          <div className="space-y-4">
                            <select
                              value={subject}
                              onChange={(e) => setSubject(e.target.value)}
                              className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                            >
                              <option value="chemistry">Chemistry</option>
                              <option value="biology">Biology</option>
                              <option value="english">Advanced English</option>
                              <option value="elective">Elective</option>
                            </select>
                            <input
                              type="number"
                              placeholder="Number of questions"
                              className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                              defaultValue="5"
                            />
                            <button
                              onClick={startQuiz}
                              className="w-full py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition"
                            >
                              Generate Quiz
                            </button>
                          </div>
                        </div>

                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-2">Recent Results</h3>
                          <div className="text-3xl font-bold text-center text-blue-600">78%</div>
                          <div className="text-center text-sm text-gray-600 dark:text-gray-400">Last quiz score</div>
                        </div>
                      </div>

                      <div className="lg:col-span-3">
                        {!showQuiz ? (
                          <div className="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-sm text-center">
                            <svg className="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                            <h3 className="text-lg font-bold mb-2">No Quiz Started</h3>
                            <p className="text-gray-600 dark:text-gray-400 mb-4">
                              Generate a quiz to test your knowledge with AI-generated questions.
                            </p>
                            <button
                              onClick={startQuiz}
                              className="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition"
                            >
                              Start New Quiz
                            </button>
                          </div>
                        ) : (
                          <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                            <div className="flex justify-between items-center mb-6">
                              <h3 className="text-lg font-bold">
                                Question {currentQuizIndex + 1} of {quiz.length}
                              </h3>
                              <div className="text-sm text-gray-600 dark:text-gray-400">
                                {subject.charAt(0).toUpperCase() + subject.slice(1)}
                              </div>
                            </div>

                            <div className="mb-6">
                              <p className="text-lg mb-4">{quiz[currentQuizIndex].question}</p>
                              <div className="space-y-2">
                                {quiz[currentQuizIndex].options.map((option, idx) => (
                                  <label
                                    key={idx}
                                    className={`flex items-center p-3 border rounded-lg cursor-pointer transition ${
                                      quizSubmitted
                                        ? idx === quiz[currentQuizIndex].correct
                                          ? 'border-green-500 bg-green-50 dark:bg-green-900/20'
                                          : idx === quizAnswers[currentQuizIndex]
                                          ? 'border-red-500 bg-red-50 dark:bg-red-900/20'
                                          : 'border-gray-200 dark:border-gray-700'
                                        : 'border-gray-200 dark:border-gray-700 hover:border-blue-500'
                                    }`}
                                  >
                                    <input
                                      type="radio"
                                      name="quiz"
                                      checked={quizAnswers[currentQuizIndex] === idx}
                                      onChange={() => handleAnswer(currentQuizIndex, idx)}
                                      disabled={quizSubmitted}
                                      className="mr-3"
                                    />
                                    {option}
                                    {quizSubmitted && idx === quiz[currentQuizIndex].correct && (
                                      <span className="ml-auto text-green-500 font-bold">‚úì</span>
                                    )}
                                    {quizSubmitted && idx === quizAnswers[currentQuizIndex] && idx !== quiz[currentQuizIndex].correct && (
                                      <span className="ml-auto text-red-500 font-bold">‚úó</span>
                                    )}
                                  </label>
                                ))}
                              </div>
                            </div>

                            {quizSubmitted && (
                              <div className="mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                                <h4 className="font-bold text-blue-800 dark:text-blue-300 mb-2">Explanation:</h4>
                                <p className="text-blue-700 dark:text-blue-400">{quiz[currentQuizIndex].explanation}</p>
                              </div>
                            )}

                            <div className="flex justify-between">
                              <button
                                onClick={prevQuestion}
                                disabled={currentQuizIndex === 0}
                                className="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition"
                              >
                                Previous
                              </button>
                              {quizSubmitted ? (
                                currentQuizIndex === quiz.length - 1 ? (
                                  <button
                                    onClick={() => setShowQuiz(false)}
                                    className="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition"
                                  >
                                    Finish
                                  </button>
                                ) : (
                                  <button
                                    onClick={nextQuestion}
                                    className="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition"
                                  >
                                    Next
                                  </button>
                                )
                              ) : (
                                currentQuizIndex === quiz.length - 1 ? (
                                  <button
                                    onClick={submitQuiz}
                                    disabled={quizAnswers[currentQuizIndex] === null}
                                    className="px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition"
                                  >
                                    Submit Quiz
                                  </button>
                                ) : (
                                  <button
                                    onClick={nextQuestion}
                                    disabled={quizAnswers[currentQuizIndex] === null}
                                    className="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition"
                                  >
                                    Next
                                  </button>
                                )
                              )}
                            </div>
                          </div>
                        )}
                      </div>
                    </div>
                  </div>
                )}

                {/* Study with AI */}
                {activeTab === 'ai' && (
                  <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800 dark:text-white">Study with AI Assistant</h2>
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                      <div className="lg:col-span-2">
                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm h-96 flex flex-col">
                          <div className="flex-1 overflow-y-auto mb-4 space-y-4" ref={chatEndRef}>
                            {aiChat.length === 0 ? (
                              <div className="text-center text-gray-500 dark:text-gray-400 mt-8">
                                <svg className="w-12 h-12 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                                </svg>
                                <p>Ask me anything about your studies. I can help with explanations, tips, and problem solving.</p>
                              </div>
                            ) : (
                              aiChat.map((msg, i) => (
                                <div
                                  key={i}
                                  className={`chat-bubble p-3 rounded-lg max-w-xs ${
                                    msg.sender === 'user'
                                      ? 'bg-blue-600 text-white self-end'
                                      : 'bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white self-start'
                                  }`}
                                >
                                  {msg.text}
                                </div>
                              ))
                            )}
                          </div>
                          <div className="flex space-x-2 rtl:space-x-reverse">
                            <button
                              onClick={toggleVoice}
                              className={`p-2 rounded-lg transition ${
                                isListening
                                  ? 'bg-red-500 text-white animate-pulse'
                                  : 'bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600'
                              }`}
                            >
                              {isListening ? (
                                <div className="flex space-x-1">
                                  <div className="voice-wave"></div>
                                  <div className="voice-wave"></div>
                                  <div className="voice-wave"></div>
                                  <div className="voice-wave"></div>
                                  <div className="voice-wave"></div>
                                </div>
                              ) : (
                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" />
                                </svg>
                              )}
                            </button>
                            <input
                              type="text"
                              value={chatInput}
                              onChange={(e) => setChatInput(e.target.value)}
                              onKeyPress={(e) => e.key === 'Enter' && sendChat()}
                              placeholder="Ask anything about Chemistry, Biology, or English..."
                              className="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                            />
                            <button
                              onClick={sendChat}
                              className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition"
                            >
                              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                              </svg>
                            </button>
                          </div>
                        </div>
                      </div>

                      <div className="space-y-6">
                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-4">Quick Actions</h3>
                          <div className="space-y-2">
                            {[
                              "Explain stoichiometry concepts",
                              "Help with essay structure",
                              "Review cell biology",
                              "Practice past paper questions"
                            ].map((action, i) => (
                              <button
                                key={i}
                                onClick={() => setChatInput(action)}
                                className="w-full text-left p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-sm transition"
                              >
                                {action}
                              </button>
                            ))}
                          </div>
                        </div>

                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-4">Your Weak Points</h3>
                          <div className="space-y-2 text-sm">
                            <div className="p-2 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300 rounded">
                              Chemistry: Thermodynamics calculations
                            </div>
                            <div className="p-2 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300 rounded">
                              Biology: Genetics problems
                            </div>
                            <div className="p-2 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-300 rounded">
                              English: Essay conclusion
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Revision Mode */}
                {activeTab === 'revision' && (
                  <div className="space-y-6">
                    <div className="flex flex-wrap items-center justify-between">
                      <h2 className="text-2xl font-bold text-gray-800 dark:text-white">Revision Mode</h2>
                      <div className="flex space-x-2 rtl:space-x-reverse">
                        <button
                          onClick={prevFlashcard}
                          className="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"
                        >
                          ‚Üê
                        </button>
                        <button
                          onClick={toggleFlashcard}
                          className="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition"
                        >
                          {showFlashcard ? 'Hide Card' : 'Show Card'}
                        </button>
                        <button
                          onClick={nextFlashcard}
                          className="px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"
                        >
                          ‚Üí
                        </button>
                      </div>
                    </div>

                    {showFlashcard && (
                      <div className="flex justify-center">
                        <div className="flashcard w-full max-w-lg cursor-pointer" onClick={toggleFlashcard}>
                          <div className="flashcard-inner">
                            <div className="flashcard-front">
                              <div className="text-center">
                                <h3 className="text-xl font-bold mb-2">Term</h3>
                                <p className="text-lg">{flashcards[currentFlashcardIndex].front}</p>
                              </div>
                            </div>
                            <div className="flashcard-back">
                              <div className="text-center">
                                <h3 className="text-xl font-bold mb-2">Definition</h3>
                                <p className="text-lg">{flashcards[currentFlashcardIndex].back}</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    )}

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                        <h3 className="text-lg font-bold mb-4">Spaced Repetition Schedule</h3>
                        <div className="space-y-3">
                          {[
                            { subject: 'Chemistry', topic: 'Thermodynamics', due: 'Today' },
                            { subject: 'Biology', topic: 'Genetics', due: 'Tomorrow' },
                            { subject: 'English', topic: 'Essay Writing', due: 'In 3 days' }
                          ].map((item, i) => (
                            <div key={i} className="flex justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg">
                              <div>
                                <div className="font-medium">{item.subject}</div>
                                <div className="text-sm text-gray-600 dark:text-gray-400">{item.topic}</div>
                              </div>
                              <div className="text-sm font-medium text-blue-600 dark:text-blue-400">{item.due}</div>
                            </div>
                          ))}
                        </div>
                      </div>

                      <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                        <h3 className="text-lg font-bold mb-4">Weekly Revision Plan</h3>
                        <div className="space-y-2 text-sm">
                          <div className="flex justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded">
                            <span>Monday</span>
                            <span>Chemistry Ch 3-4</span>
                          </div>
                          <div className="flex justify-between p-2 bg-green-50 dark:bg-green-900/20 rounded">
                            <span>Tuesday</span>
                            <span>Biology Ch 5-6</span>
                          </div>
                          <div className="flex justify-between p-2 bg-purple-50 dark:bg-purple-900/20 rounded">
                            <span>Wednesday</span>
                            <span>English Essay Practice</span>
                          </div>
                          <div className="flex justify-between p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded">
                            <span>Friday</span>
                            <span>Full Mock Exam</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                {/* Admin Panel */}
                {activeTab === 'admin' && (
                  <div className="space-y-6">
                    <h2 className="text-2xl font-bold text-gray-800 dark:text-white">Admin Panel</h2>
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                      <div className="lg:col-span-2 space-y-6">
                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-4">Student Progress Overview</h3>
                          <div className="overflow-x-auto">
                            <table className="w-full">
                              <thead>
                                <tr className="border-b dark:border-gray-700">
                                  <th className="text-right py-2">Name</th>
                                  <th className="text-right py-2">Chemistry</th>
                                  <th className="text-right py-2">Biology</th>
                                  <th className="text-right py-2">English</th>
                                  <th className="text-right py-2">Points</th>
                                </tr>
                              </thead>
                              <tbody>
                                {[
                                  { name: 'Ahmed Ali', chem: 65, bio: 45, eng: 78, points: 1250 },
                                  { name: 'Layla Hassan', chem: 80, bio: 72, eng: 85, points: 1890 },
                                  { name: 'Omar Khalid', chem: 45, bio: 58, eng: 62, points: 920 }
                                ].map((student, i) => (
                                  <tr key={i} className="border-b dark:border-gray-700">
                                    <td className="py-3 font-medium">{student.name}</td>
                                    <td className="py-3">
                                      <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                        <div
                                          className="bg-blue-500 h-2 rounded-full"
                                          style={{ width: `${student.chem}%` }}
                                        ></div>
                                      </div>
                                      <div className="text-xs text-gray-500 mt-1">{student.chem}%</div>
                                    </td>
                                    <td className="py-3">
                                      <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                        <div
                                          className="bg-green-500 h-2 rounded-full"
                                          style={{ width: `${student.bio}%` }}
                                        ></div>
                                      </div>
                                      <div className="text-xs text-gray-500 mt-1">{student.bio}%</div>
                                    </td>
                                    <td className="py-3">
                                      <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                        <div
                                          className="bg-purple-500 h-2 rounded-full"
                                          style={{ width: `${student.eng}%` }}
                                        ></div>
                                      </div>
                                      <div className="text-xs text-gray-500 mt-1">{student.eng}%</div>
                                    </td>
                                    <td className="py-3 font-medium">{student.points}</td>
                                  </tr>
                                ))}
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>

                      <div className="space-y-6">
                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-4">Upload Resource</h3>
                          <div className="space-y-3">
                            <select className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white">
                              <option>Chemistry</option>
                              <option>Biology</option>
                              <option>Advanced English</option>
                              <option>Elective</option>
                            </select>
                            <input
                              type="text"
                              placeholder="Resource title"
                              className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                            />
                            <input
                              type="file"
                              className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"
                            />
                            <button className="w-full py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition">
                              Upload
                            </button>
                          </div>
                        </div>

                        <div className="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm">
                          <h3 className="text-lg font-bold mb-4">Send Announcement</h3>
                          <textarea
                            className="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white h-32"
                            placeholder="Write an announcement to all students..."
                          ></textarea>
                          <button className="w-full mt-2 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition">
                            Send
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                )}
              </main>
            </div>
          )}

          {/* Footer */}
          <footer className="bg-white dark:bg-gray-800 shadow-sm mt-auto">
            <div className="container mx-auto px-4 py-4">
              <div className="text-center text-sm text-gray-600 dark:text-gray-400">
                Diraasti ‚Äì Tawjihi Generation 2008 | AI-Powered Study Platform
              </div>
            </div>
          </footer>
        </div>
      );
    };

    ReactDOM.render(<DiraastiApp />, document.getElementById('app'));
  </script>
</body>
</html>
